### Budget API Test File
### Use with REST Client extension in VS Code
### Press "Send Request" above each request

@baseUrl = http://localhost:3000/api
@token = 

### 1. Login to get token
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}

### Extract token from login response (manual copy to @token variable above)

### 2. Get Categories (to use in budget)
GET {{baseUrl}}/categories
Authorization: Bearer {{token}}

### 3. Create Monthly Budget
POST {{baseUrl}}/budgets
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Monthly Food Budget",
  "amount": 5000000,
  "period": "monthly",
  "startDate": "2025-11-01T00:00:00.000Z",
  "endDate": "2025-11-30T23:59:59.999Z",
  "categories": [],
  "alertThreshold": 80,
  "alertEnabled": true,
  "repeatAutomatically": true
}

### 4. Get All Budgets
GET {{baseUrl}}/budgets
Authorization: Bearer {{token}}

### 5. Get Active Budgets Only
GET {{baseUrl}}/budgets/active
Authorization: Bearer {{token}}

### 6. Get Budget Status Summary
GET {{baseUrl}}/budgets/status
Authorization: Bearer {{token}}

### 7. Get Single Budget by ID (replace :id with actual budget ID)
GET {{baseUrl}}/budgets/673e45b820e3ca1da4ebe1fc
Authorization: Bearer {{token}}

### 8. Update Budget (replace :id with actual budget ID)
PUT {{baseUrl}}/budgets/673e45b820e3ca1da4ebe1fc
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "amount": 6000000,
  "alertThreshold": 75
}

### 9. Refresh Budget Spent Amount
POST {{baseUrl}}/budgets/673e45b820e3ca1da4ebe1fc/refresh
Authorization: Bearer {{token}}

### 10. Refresh All Budgets
POST {{baseUrl}}/budgets/refresh-all
Authorization: Bearer {{token}}

### 11. Create Yearly Budget
POST {{baseUrl}}/budgets
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Annual Entertainment Budget",
  "amount": 20000000,
  "period": "yearly",
  "startDate": "2025-01-01T00:00:00.000Z",
  "endDate": "2025-12-31T23:59:59.999Z",
  "categories": [],
  "alertThreshold": 90,
  "alertEnabled": true,
  "repeatAutomatically": false
}

### 12. Filter Budgets by Period
GET {{baseUrl}}/budgets?period=monthly
Authorization: Bearer {{token}}

### 13. Filter Budgets by Active Status
GET {{baseUrl}}/budgets?active=true
Authorization: Bearer {{token}}

### 14. Soft Delete Budget (sets isActive to false)
DELETE {{baseUrl}}/budgets/673e45b820e3ca1da4ebe1fc
Authorization: Bearer {{token}}

### 15. Permanently Delete Budget
DELETE {{baseUrl}}/budgets/673e45b820e3ca1da4ebe1fc/permanent
Authorization: Bearer {{token}}

### 16. Get Budgets Including Inactive
GET {{baseUrl}}/budgets?active=false
Authorization: Bearer {{token}}
